<style>
    div.offcanvas-body {

        /* Basic styles */
        ul {
            list-style-type: none;
            padding-left: 0;
            margin: 0;
        }

        li {
            margin: 5px 0;
            position: relative;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        li:hover {
            background-color: #f8f9fa;
        }

        li ul li:hover {
            background-color: #e0e1e2;
        }

        li ul li ul li:hover {
            background-color: #c8c9ca;
        }

        .clickable-li {
            text-decoration: none;
            color: #007BFF;
        }

        ul ul {
            padding-left: 50px;
            /* Indentation for nested lists */
            display: none;
            /* Hide nested lists by default */
        }

        /* Arrow indicators for nested lists */
        li>ul::before {
            content: '\25B6';
            /*Right arrow*/
            position: absolute;
            left: -20px;
            transition: transform 2s ease;
        }

        li.expanded>ul::before {
            content: '\25BC';
            /* Down arrow */
        }
    }
</style>
<div class="container">
    <ul class="">
        <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/search">Search</li>
        <li class="clickable-li" data-url="/reports/<%=currentPlant._id%>">Reports</li>
        <li class="">Schedule
            <ul class="">
                <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/schedule/Operations">Operations</li>
                <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/schedule/maintenanceTech">Maintenance and Technical</li>
            </ul>
        </li>
        <li class="">Operations
            <ul class="">
                <li class="">Program Administration
                    <ul class="">
                        <% for (let segInstruction of segInstructions.filter(segInstruction => segInstruction.team === 'Operations' && segInstruction.department === 'Program Administration')) { %>
                            <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/seg/<%= segInstruction._id %>"><%= segInstruction.segInstructionID %></li>
                        <% } %>
                    </ul>
                </li>
                <li class="">Implementation and Oversight
                    <ul class="">
                        <% for (let segInstruction of segInstructions.filter(segInstruction => segInstruction.team === 'Operations' && segInstruction.department === 'Implementation and Oversight')) { %>
                            <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/seg/<%= segInstruction._id %>"><%= segInstruction.segInstructionID %></li>
                        <% } %>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="">Maintenance and Technical
            <ul class="">
                <li class="">Program Administration
                    <ul class="">
                        <% for (let segInstruction of segInstructions.filter(segInstruction => segInstruction.team === 'Maintenance and Technical' && segInstruction.department === 'Program Administration')) { %>
                            <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/seg/<%= segInstruction._id %>"><%= segInstruction.segInstructionID %></li>
                        <% } %>
                    </ul>
                </li>
                <li class="">Implementation and Oversight
                    <ul class="">
                        <% for (let segInstruction of segInstructions.filter(segInstruction => segInstruction.team === 'Maintenance and Technical' && segInstruction.department === 'Implementation and Oversight')) { %>
                            <li class="clickable-li" data-url="/plant/<%=currentPlant._id%>/seg/<%= segInstruction._id %>"><%= segInstruction.segInstructionID %></li>
                        <% } %>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="">Observations
            <ul class="">
                <li class="clickable-li" data-url="">Operations</li>
                <li class="clickable-li" data-url="">Maintenance and Technical</li>
            </ul>
        </li>
        <li class="clickable-li" data-url="/aosr">AOSR</li>
        <li class="clickable-li" data-url="/performanceMatrix">Training Issues Matrix</li>
        <li class="clickable-li" data-url="/saMatrix">Self-Assesment Matrix</li>
        <li class="clickable-li" data-url="/archives">Archives</li>
        <li class="clickable-li" data-url="/generalResources?type=ACADS">ACADS</li>
        <li class="clickable-li" data-url="/generalResources?type=IERs">IERs</li>
        <li class="clickable-li" data-url="/generalResources?type=SIF/TIF">SIF/TIF</li>
        <li class="clickable-li" data-url="/generalResources?type=Power History">Power History</li>
        <li class="clickable-li" data-url="/generalResources?type=Other Resources">Other Resources</li>
    </ul>
</div>

<script>
    // JavaScript to handle toggling of nested lists
    document.addEventListener('DOMContentLoaded', function () {
        const nestedLists = document.querySelectorAll('li > ul');

        nestedLists.forEach(nestedList => {
            const parentLi = nestedList.parentElement;

            parentLi.addEventListener('click', function (e) {
                if (e.target === parentLi || e.target.tagName === 'A') {
                    e.stopPropagation();
                    const isExpanded = parentLi.classList.contains('expanded');

                    nestedList.style.display = isExpanded ? 'none' : 'block';
                    parentLi.classList.toggle('expanded', !isExpanded);
                }
            });
        });
    });
</script>

<script>
    document.querySelectorAll('.clickable-li').forEach(item => {
        item.addEventListener('click', function() {
            window.location.href = this.dataset.url;
        });
    });
</script>